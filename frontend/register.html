<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêƒÉng k√Ω - jobPortal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
        }
    </style>
</head>
<body class="bg-white">
    <!-- Navigation Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex items-center justify-between">
            <!-- Logo -->
            <a href="index.html" class="flex items-center gap-2">
                <span class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-700 bg-clip-text text-transparent">jobPortal</span>
            </a>

            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center gap-8">
                <a href="index.html" class="text-gray-700 hover:text-blue-600 transition text-sm font-medium">Vi·ªác l√†m</a>
                <a href="#" class="text-gray-700 hover:text-blue-600 transition text-sm font-medium">Danh m·ª•c ‚ñº</a>
                <a href="#" class="text-gray-700 hover:text-blue-600 transition text-sm font-medium">C√¥ng ty</a>
                <a href="#" class="text-gray-700 hover:text-blue-600 transition text-sm font-medium">Li√™n h·ªá</a>
            </div>

            <!-- Auth Buttons -->
            <div class="flex items-center gap-3">
                <a href="login.html" class="text-gray-700 text-sm font-medium hover:text-blue-600">ƒêƒÉng nh·∫≠p</a>
                <a href="register.html" class="bg-blue-600 text-white px-4 py-2 rounded font-semibold hover:bg-blue-700 transition text-sm">ƒêƒÉng k√Ω</a>
                <button class="bg-cyan-500 text-white px-4 py-2 rounded font-semibold hover:bg-cyan-600 transition text-sm">ƒêƒÉng tin tuy·ªÉn d·ª•ng</button>
            </div>

            <!-- Mobile Menu Button -->
            <button class="md:hidden text-gray-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </nav>
    </header>

    <!-- Register Section -->
    <section class="min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="w-full max-w-md">
            <!-- Progress Steps -->
            <div class="mb-8">
                <div class="flex items-center justify-center mb-4">
                    <div class="flex items-center">
                        <!-- Step 1 -->
                        <div class="flex items-center">
                            <div id="step-1-indicator" class="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-sm font-medium">
                                1
                            </div>
                            <span id="step-1-text" class="ml-2 text-sm font-medium text-blue-600">ƒêƒÉng k√Ω</span>
                        </div>
                        
                        <!-- Line -->
                        <div id="line-1" class="w-16 h-0.5 bg-gray-300 mx-4"></div>
                        
                        <!-- Step 2 -->
                        <div class="flex items-center">
                            <div id="step-2-indicator" class="w-8 h-8 rounded-full bg-gray-300 text-gray-500 flex items-center justify-center text-sm font-medium">
                                2
                            </div>
                            <span id="step-2-text" class="ml-2 text-sm font-medium text-gray-500">X√°c th·ª±c</span>
                        </div>
                        
                        <!-- Line -->
                        <div id="line-2" class="w-16 h-0.5 bg-gray-300 mx-4"></div>
                        
                        <!-- Step 3 -->
                        <div class="flex items-center">
                            <div id="step-3-indicator" class="w-8 h-8 rounded-full bg-gray-300 text-gray-500 flex items-center justify-center text-sm font-medium">
                                3
                            </div>
                            <span id="step-3-text" class="ml-2 text-sm font-medium text-gray-500">Ho√†n t·∫•t</span>
                        </div>
                    </div>
                </div>
                <p class="text-center text-gray-600 text-sm">T·∫°o t√†i kho·∫£n m·ªõi ƒë·ªÉ s·ª≠ d·ª•ng JobPortal</p>
            </div>

            <!-- Tab Switch -->
            <div class="flex gap-4 mb-8">
                <button class="flex-1 py-3 bg-blue-600 text-white rounded font-medium text-sm hover:bg-blue-700 transition flex items-center justify-center gap-2">
                    <span>üë§</span> ·ª®ng vi√™n
                </button>
                <button class="flex-1 py-3 bg-gray-100 text-gray-700 rounded font-medium text-sm hover:bg-gray-200 transition flex items-center justify-center gap-2">
                    <span>üè¢</span> Nh√† tuy·ªÉn d·ª•ng
                </button>
            </div>

            <!-- Step 1: Register Form -->
            <div id="step-1" class="bg-white">
                <h1 class="text-2xl font-bold text-gray-900 mb-2 text-center">ƒêƒÉng k√Ω t√†i kho·∫£n</h1>
                <p class="text-gray-600 text-sm text-center mb-6">Ch·ªâ c√≤n m·ªôt b∆∞·ªõc n·ªØa ƒë·ªÉ ho√†n t·∫•t</p>

                <form id="register-form" class="space-y-4">
                    <!-- Email Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ƒê·ªãa ch·ªâ email</label>
                        <input 
                            type="email" 
                            id="register-email"
                            placeholder="Nh·∫≠p email c·ªßa b·∫°n"
                            class="w-full px-3 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"
                            required
                        >
                    </div>

                    <!-- Password Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">M·∫≠t kh·∫©u</label>
                        <input 
                            type="password" 
                            id="register-password"
                            placeholder="Nh·∫≠p m·∫≠t kh·∫©u"
                            class="w-full px-3 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"
                            required
                        >
                    </div>

                    <!-- Confirm Password Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
                        <input 
                            type="password" 
                            id="confirm-password"
                            placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u"
                            class="w-full px-3 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"
                            required
                        >
                    </div>

                    <!-- Terms & Conditions -->
                    <div class="flex items-start gap-2">
                        <input type="checkbox" id="agree-terms" class="mt-1" required>
                        <label for="agree-terms" class="text-sm text-gray-600">
                            T√¥i ƒë·ªìng √Ω v·ªõi <a href="#" class="text-blue-600 hover:underline">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a> v√† 
                            <a href="#" class="text-blue-600 hover:underline">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                        </label>
                    </div>

                    <!-- Register Button -->
                    <button 
                        type="submit" 
                        class="w-full bg-blue-600 text-white py-3 rounded font-semibold hover:bg-blue-700 transition text-sm"
                    >
                        Ti·∫øp t·ª•c
                    </button>
                </form>

                <!-- Login Link -->
                <p class="text-center text-sm text-gray-600 mt-6">
                    ƒê√£ c√≥ t√†i kho·∫£n? <a href="login.html" class="text-blue-600 hover:underline font-medium">ƒêƒÉng nh·∫≠p</a>
                </p>
            </div>

            <!-- Step 2: Email Verification -->
            <div id="step-2" class="bg-white hidden">
                <h1 class="text-2xl font-bold text-gray-900 mb-2 text-center">X√°c th·ª±c email</h1>
                <p class="text-gray-600 text-sm text-center mb-6">
                    Vui l√≤ng nh·∫≠p m√£ OTP ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒë·∫øn <br>
                    <span id="verify-email" class="font-medium text-gray-900"></span>
                </p>

                <form id="verify-form" class="space-y-4">
                    <!-- OTP Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">M√£ OTP (6 ch·ªØ s·ªë)</label>
                        <input 
                            type="text" 
                            id="otp-code"
                            placeholder="Nh·∫≠p m√£ OTP"
                            maxlength="6"
                            class="w-full px-3 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm text-center text-lg tracking-widest"
                            required
                        >
                    </div>

                    <!-- Resend OTP -->
                    <div class="text-center">
                        <p class="text-sm text-gray-600 mb-2">Kh√¥ng nh·∫≠n ƒë∆∞·ª£c m√£?</p>
                        <button 
                            type="button"
                            id="resend-otp-btn"
                            class="text-blue-600 hover:underline text-sm font-medium"
                        >
                            G·ª≠i l·∫°i m√£ OTP
                        </button>
                        <div id="resend-countdown" class="text-sm text-gray-500 mt-1 hidden">
                            G·ª≠i l·∫°i sau <span id="countdown">60</span>s
                        </div>
                    </div>

                    <!-- Verify Button -->
                    <button 
                        type="submit" 
                        class="w-full bg-blue-600 text-white py-3 rounded font-semibold hover:bg-blue-700 transition text-sm"
                    >
                        X√°c th·ª±c
                    </button>
                </form>

                <!-- Back Button -->
                <button 
                    id="back-to-register"
                    class="w-full mt-3 bg-gray-100 text-gray-700 py-3 rounded font-semibold hover:bg-gray-200 transition text-sm"
                >
                    Quay l·∫°i
                </button>
            </div>

            <!-- Step 3: Complete Profile -->
            <div id="step-3" class="bg-white hidden">
                <h1 class="text-2xl font-bold text-gray-900 mb-2 text-center">Ho√†n t·∫•t th√¥ng tin</h1>
                <p class="text-gray-600 text-sm text-center mb-6">Ch·ªâ c√≤n m·ªôt b∆∞·ªõc n·ªØa ƒë·ªÉ ho√†n t·∫•t</p>

                <form id="profile-form" class="space-y-4">
                    <!-- Name Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">H·ªç v√† t√™n</label>
                        <input 
                            type="text" 
                            id="full-name"
                            placeholder="Nh·∫≠p h·ªç v√† t√™n"
                            class="w-full px-3 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"
                            required
                        >
                    </div>

                    <!-- Phone Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">S·ªë ƒëi·ªán tho·∫°i</label>
                        <input 
                            type="tel" 
                            id="phone-number"
                            placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i"
                            class="w-full px-3 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"
                            required
                        >
                    </div>

                    <!-- Address Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ƒê·ªãa ch·ªâ</label>
                        <input 
                            type="text" 
                            id="address"
                            placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ"
                            class="w-full px-3 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"
                            required
                        >
                    </div>

                    <!-- Position Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">V·ªã tr√≠ c√¥ng vi·ªác</label>
                        <input 
                            type="text" 
                            id="headline"
                            placeholder="VD: Frontend Developer"
                            class="w-full px-3 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"
                        >
                    </div>

                    <!-- Summary Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Gi·ªõi thi·ªáu b·∫£n th√¢n</label>
                        <textarea 
                            id="summary"
                            placeholder="M√¥ t·∫£ ng·∫Øn v·ªÅ b·∫£n th√¢n v√† kinh nghi·ªám..."
                            rows="3"
                            class="w-full px-3 py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm resize-none"
                        ></textarea>
                    </div>

                    <!-- Complete Button -->
                    <button 
                        type="submit" 
                        class="w-full bg-blue-600 text-white py-3 rounded font-semibold hover:bg-blue-700 transition text-sm"
                    >
                        Ho√†n t·∫•t ƒëƒÉng k√Ω
                    </button>
                </form>

                <!-- Back Button -->
                <button 
                    id="back-to-verify"
                    class="w-full mt-3 bg-gray-100 text-gray-700 py-3 rounded font-semibold hover:bg-gray-200 transition text-sm"
                >
                    Quay l·∫°i
                </button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <!-- About -->
                <div>
                    <h3 class="text-white font-semibold mb-4">V·ªÅ JobPortal</h3>
                    <p class="text-sm mb-4">
                        N·ªÅn t·∫£ng tuy·ªÉn d·ª•ng h√†ng ƒë·∫ßu Vi·ªát Nam, k·∫øt n·ªëi ·ª©ng vi√™n v·ªõi c√°c c∆° h·ªôi ngh·ªÅ nghi·ªáp tuy·ªát v·ªùi.
                    </p>
                    <div class="flex items-center gap-2 text-sm">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                        </svg>
                        123 ƒê∆∞·ªùng ABC, Qu·∫≠n 1, TP. H·ªì Ch√≠ Minh
                    </div>
                    <div class="flex items-center gap-2 text-sm mt-2">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>
                        </svg>
                        0123 456 789
                    </div>
                    <div class="flex items-center gap-2 text-sm mt-2">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
                        </svg>
                        contact@jobportal.vn
                    </div>
                </div>

                <!-- For Candidates -->
                <div>
                    <h3 class="text-white font-semibold mb-4">D√†nh cho ·ª©ng vi√™n</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="hover:text-white transition">T√¨m vi·ªác l√†m</a></li>
                        <li><a href="#" class="hover:text-white transition">T·∫°o h·ªì s∆°</a></li>
                        <li><a href="#" class="hover:text-white transition">Vi·ªác l√†m ƒë√£ l∆∞u</a></li>
                        <li><a href="#" class="hover:text-white transition">ƒê∆°n ·ª©ng tuy·ªÉn</a></li>
                    </ul>
                </div>

                <!-- For Employers -->
                <div>
                    <h3 class="text-white font-semibold mb-4">D√†nh cho nh√† tuy·ªÉn d·ª•ng</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="hover:text-white transition">ƒêƒÉng tin tuy·ªÉn d·ª•ng</a></li>
                        <li><a href="#" class="hover:text-white transition">Qu·∫£n l√Ω c√¥ng ty</a></li>
                        <li><a href="#" class="hover:text-white transition">T√¨m ·ª©ng vi√™n</a></li>
                        <li><a href="#" class="hover:text-white transition">B·∫£ng gi√° d·ªãch v·ª•</a></li>
                    </ul>
                </div>

                <!-- Other Info -->
                <div>
                    <h3 class="text-white font-semibold mb-4">Th√¥ng tin kh√°c</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="hover:text-white transition">V·ªÅ ch√∫ng t√¥i</a></li>
                        <li><a href="#" class="hover:text-white transition">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                        <li><a href="#" class="hover:text-white transition">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></li>
                        <li><a href="#" class="hover:text-white transition">Li√™n h·ªá</a></li>
                    </ul>
                </div>
            </div>

            <!-- Social & Bottom -->
            <div class="border-t border-gray-800 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                    <p class="text-sm">¬© 2025 JobPortal. T·∫•t c·∫£ c√°c quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
                    <div class="flex items-center gap-4">
                        <a href="#" class="hover:text-white transition">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M20 10c0-5.523-4.477-10-10-10S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.89h-2.33v6.988C16.343 19.128 20 14.991 20 10z" clip-rule="evenodd"></path>
                            </svg>
                        </a>
                        <a href="#" class="hover:text-white transition">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M6.29 18.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0020 3.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.073 4.073 0 01.8 7.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 010 16.407a11.616 11.616 0 006.29 1.84"></path>
                            </svg>
                        </a>
                        <a href="#" class="hover:text-white transition">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.338 16.338H13.67V12.16c0-.995-.017-2.277-1.387-2.277-1.39 0-1.601 1.086-1.601 2.207v4.248H8.014v-8.59h2.559v1.174h.037c.356-.675 1.227-1.387 2.526-1.387 2.703 0 3.203 1.778 3.203 4.092v4.711zM5.005 6.575a1.548 1.548 0 11-.003-3.096 1.548 1.548 0 01.003 3.096zm-1.337 9.763H6.34v-8.59H3.667v8.59zM17.668 1H2.328C1.595 1 1 1.581 1 2.298v15.403C1 18.418 1.595 19 2.328 19h15.34c.734 0 1.332-.582 1.332-1.299V2.298C19 1.581 18.402 1 17.668 1z" clip-rule="evenodd"></path>
                            </svg>
                        </a>
                        <a href="#" class="hover:text-white transition">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.017 14.373v-2.996c0-.615-.03-1.091-.061-1.385-.016-.156-.045-.277-.084-.394l-.097-.265c-.124-.32-.306-.54-.669-.635-.138-.036-.286-.041-.451-.041-.615 0-1.126.266-1.524.798-.398.532-.597 1.132-.597 1.8v2.996H7v-7h1.634v1.06c.563-.914 1.423-1.371 2.581-1.371.615 0 1.126.093 1.532.279.407.186.72.445.938.777.218.332.328.728.328 1.189v5.066H12.017z" clip-rule="evenodd"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // API Configuration
        const API_BASE_URL = 'http://localhost:8080/api';
        
        // Current step and user data
        let currentStep = 1;
        let userData = {
            email: '',
            password: '',
            accessToken: ''
        };

        // Update step indicators
        function updateStepIndicators(step) {
            // Reset all steps
            for (let i = 1; i <= 3; i++) {
                const indicator = document.getElementById(`step-${i}-indicator`);
                const text = document.getElementById(`step-${i}-text`);
                const line = document.getElementById(`line-${i}`);
                
                if (i < step) {
                    // Completed steps
                    indicator.classList.remove('bg-gray-300', 'text-gray-500', 'bg-blue-600', 'text-white');
                    indicator.classList.add('bg-green-500', 'text-white');
                    indicator.innerHTML = '‚úì';
                    text.classList.remove('text-gray-500', 'text-blue-600');
                    text.classList.add('text-green-500');
                    if (line) {
                        line.classList.remove('bg-gray-300');
                        line.classList.add('bg-green-500');
                    }
                } else if (i === step) {
                    // Current step
                    indicator.classList.remove('bg-gray-300', 'text-gray-500', 'bg-green-500');
                    indicator.classList.add('bg-blue-600', 'text-white');
                    indicator.innerHTML = i;
                    text.classList.remove('text-gray-500', 'text-green-500');
                    text.classList.add('text-blue-600');
                } else {
                    // Future steps
                    indicator.classList.remove('bg-blue-600', 'text-white', 'bg-green-500');
                    indicator.classList.add('bg-gray-300', 'text-gray-500');
                    indicator.innerHTML = i;
                    text.classList.remove('text-blue-600', 'text-green-500');
                    text.classList.add('text-gray-500');
                    if (line) {
                        line.classList.remove('bg-green-500');
                        line.classList.add('bg-gray-300');
                    }
                }
            }
        }

        // Show specific step
        function showStep(step) {
            // Hide all steps
            document.getElementById('step-1').classList.add('hidden');
            document.getElementById('step-2').classList.add('hidden');
            document.getElementById('step-3').classList.add('hidden');
            
            // Show current step
            document.getElementById(`step-${step}`).classList.remove('hidden');
            
            // Update indicators
            updateStepIndicators(step);
            currentStep = step;
        }

        // Show loading state
        function showLoading(button, text = 'ƒêang x·ª≠ l√Ω...') {
            button.disabled = true;
            button.innerHTML = `
                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                ${text}
            `;
        }

        // Hide loading state
        function hideLoading(button, text) {
            button.disabled = false;
            button.innerHTML = text;
        }

        // Show error message
        function showError(message) {
            // Remove existing error
            const existingError = document.querySelector('.error-message');
            if (existingError) {
                existingError.remove();
            }

            // Create error element
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4';
            errorDiv.innerHTML = `<span class="block sm:inline">${message}</span>`;

            // Insert before current step
            const currentStepElement = document.getElementById(`step-${currentStep}`);
            currentStepElement.insertBefore(errorDiv, currentStepElement.firstChild);

            // Auto remove after 5 seconds
            setTimeout(() => {
                if (errorDiv.parentNode) {
                    errorDiv.remove();
                }
            }, 5000);
        }

        // Show success message
        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4';
            successDiv.innerHTML = `<span class="block sm:inline">${message}</span>`;

            const currentStepElement = document.getElementById(`step-${currentStep}`);
            currentStepElement.insertBefore(successDiv, currentStepElement.firstChild);

            setTimeout(() => {
                if (successDiv.parentNode) {
                    successDiv.remove();
                }
            }, 3000);
        }

        // API: Register
        async function registerUser(email, password) {
            try {
                const response = await fetch(`${API_BASE_URL}/auth/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();
                return {
                    success: response.ok && data.success,
                    message: data.message,
                    data: data.data
                };
            } catch (error) {
                console.error('Register API Error:', error);
                return {
                    success: false,
                    message: 'L·ªói k·∫øt n·ªëi. Vui l√≤ng th·ª≠ l·∫°i sau.'
                };
            }
        }

        // API: Verify Email
        async function verifyEmail(email, otp) {
            try {
                const response = await fetch(`${API_BASE_URL}/auth/verify-email`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email, otp })
                });

                const data = await response.json();
                return {
                    success: response.ok && data.success,
                    message: data.message
                };
            } catch (error) {
                console.error('Verify Email API Error:', error);
                return {
                    success: false,
                    message: 'L·ªói k·∫øt n·ªëi. Vui l√≤ng th·ª≠ l·∫°i sau.'
                };
            }
        }

        // API: Resend OTP
        async function resendOTP(email) {
            try {
                const response = await fetch(`${API_BASE_URL}/auth/resend-otp`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email })
                });

                const data = await response.json();
                return {
                    success: response.ok && data.success,
                    message: data.message
                };
            } catch (error) {
                console.error('Resend OTP API Error:', error);
                return {
                    success: false,
                    message: 'L·ªói k·∫øt n·ªëi. Vui l√≤ng th·ª≠ l·∫°i sau.'
                };
            }
        }

        // API: Login (after email verification)
        async function loginUser(email, password) {
            try {
                const response = await fetch(`${API_BASE_URL}/auth/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();
                return {
                    success: response.ok && data.success,
                    message: data.message,
                    data: data.data
                };
            } catch (error) {
                console.error('Login API Error:', error);
                return {
                    success: false,
                    message: 'L·ªói k·∫øt n·ªëi. Vui l√≤ng th·ª≠ l·∫°i sau.'
                };
            }
        }

        // API: Update Profile
        async function updateProfile(profileData, token) {
            try {
                const response = await fetch(`${API_BASE_URL}/users/profile/me`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(profileData)
                });

                const data = await response.json();
                return {
                    success: response.ok && data.success,
                    message: data.message,
                    data: data.data
                };
            } catch (error) {
                console.error('Update Profile API Error:', error);
                return {
                    success: false,
                    message: 'L·ªói k·∫øt n·ªëi. Vui l√≤ng th·ª≠ l·∫°i sau.'
                };
            }
        }

        // Store authentication data
        function storeAuthData(data) {
            try {
                localStorage.setItem('access_token', data.token);
                localStorage.setItem('refresh_token', data.refreshToken);
                localStorage.setItem('user_id', data.user.id.toString());
                localStorage.setItem('login_time', Date.now().toString());
                
                console.log('Auth data stored successfully');
            } catch (error) {
                console.error('Error storing auth data:', error);
            }
        }

        // Step 1: Register Form Handler
        document.getElementById('register-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitButton = this.querySelector('button[type="submit"]');
            const email = document.getElementById('register-email').value.trim();
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            const agreeTerms = document.getElementById('agree-terms').checked;
            
            // Validation
            if (!email || !password || !confirmPassword) {
                showError('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin');
                return;
            }

            if (!email.includes('@') || !email.includes('.')) {
                showError('Vui l√≤ng nh·∫≠p email h·ª£p l·ªá');
                return;
            }

            if (password.length < 6) {
                showError('M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±');
                return;
            }

            if (password !== confirmPassword) {
                showError('M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp');
                return;
            }

            if (!agreeTerms) {
                showError('Vui l√≤ng ƒë·ªìng √Ω v·ªõi ƒëi·ªÅu kho·∫£n s·ª≠ d·ª•ng');
                return;
            }

            // Show loading
            showLoading(submitButton, 'ƒêang ƒëƒÉng k√Ω...');

            try {
                const result = await registerUser(email, password);

                if (result.success) {
                    userData.email = email;
                    userData.password = password;
                    
                    showSuccess(result.message);
                    
                    setTimeout(() => {
                        document.getElementById('verify-email').textContent = email;
                        showStep(2);
                    }, 1500);
                } else {
                    showError(result.message);
                }
            } catch (error) {
                console.error('Register error:', error);
                showError('C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i.');
            } finally {
                hideLoading(submitButton, 'Ti·∫øp t·ª•c');
            }
        });

        // Step 2: Verify Email Form Handler
        document.getElementById('verify-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitButton = this.querySelector('button[type="submit"]');
            const otpCode = document.getElementById('otp-code').value.trim();
            
            // Validation
            if (!otpCode || otpCode.length !== 6) {
                showError('Vui l√≤ng nh·∫≠p m√£ OTP 6 ch·ªØ s·ªë');
                return;
            }

            // Show loading
            showLoading(submitButton, 'ƒêang x√°c th·ª±c...');

            try {
                const verifyResult = await verifyEmail(userData.email, otpCode);

                if (verifyResult.success) {
                    showSuccess(verifyResult.message);
                    
                    // Login to get token
                    const loginResult = await loginUser(userData.email, userData.password);
                    
                    if (loginResult.success) {
                        userData.accessToken = loginResult.data.token;
                        storeAuthData(loginResult.data);
                        
                        setTimeout(() => {
                            showStep(3);
                        }, 1500);
                    } else {
                        showError('ƒê√£ x√°c th·ª±c th√†nh c√¥ng nh∆∞ng kh√¥ng th·ªÉ ƒëƒÉng nh·∫≠p. Vui l√≤ng ƒëƒÉng nh·∫≠p th·ªß c√¥ng.');
                        setTimeout(() => {
                            window.location.href = 'login.html';
                        }, 2000);
                    }
                } else {
                    showError(verifyResult.message);
                }
            } catch (error) {
                console.error('Verify error:', error);
                showError('C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i.');
            } finally {
                hideLoading(submitButton, 'X√°c th·ª±c');
            }
        });

        // Step 3: Profile Form Handler
        document.getElementById('profile-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitButton = this.querySelector('button[type="submit"]');
            const name = document.getElementById('full-name').value.trim();
            const phone = document.getElementById('phone-number').value.trim();
            const address = document.getElementById('address').value.trim();
            const headline = document.getElementById('headline').value.trim();
            const summary = document.getElementById('summary').value.trim();
            
            // Validation
            if (!name || !phone || !address) {
                showError('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc');
                return;
            }

            if (phone.length < 10) {
                showError('S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá');
                return;
            }

            // Show loading
            showLoading(submitButton, 'ƒêang ho√†n t·∫•t...');

            try {
                const profileData = {
                    name,
                    phone,
                    address,
                    headline: headline || null,
                    summary: summary || null
                };

                const result = await updateProfile(profileData, userData.accessToken);

                if (result.success) {
                    showSuccess('ƒêƒÉng k√Ω th√†nh c√¥ng! ƒêang chuy·ªÉn h∆∞·ªõng...');
                    
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 2000);
                } else {
                    showError(result.message);
                }
            } catch (error) {
                console.error('Update profile error:', error);
                showError('C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i.');
            } finally {
                hideLoading(submitButton, 'Ho√†n t·∫•t ƒëƒÉng k√Ω');
            }
        });

        // Resend OTP Handler
        let resendCountdown = 0;
        document.getElementById('resend-otp-btn').addEventListener('click', async function() {
            if (resendCountdown > 0) return;
            
            const button = this;
            const originalText = button.textContent;
            
            button.disabled = true;
            button.textContent = 'ƒêang g·ª≠i...';

            try {
                const result = await resendOTP(userData.email);
                
                if (result.success) {
                    showSuccess(result.message);
                    
                    // Start countdown
                    resendCountdown = 60;
                    document.getElementById('resend-countdown').classList.remove('hidden');
                    button.classList.add('hidden');
                    
                    const countdownInterval = setInterval(() => {
                        resendCountdown--;
                        document.getElementById('countdown').textContent = resendCountdown;
                        
                        if (resendCountdown <= 0) {
                            clearInterval(countdownInterval);
                            document.getElementById('resend-countdown').classList.add('hidden');
                            button.classList.remove('hidden');
                            button.disabled = false;
                            button.textContent = originalText;
                        }
                    }, 1000);
                } else {
                    showError(result.message);
                    button.disabled = false;
                    button.textContent = originalText;
                }
            } catch (error) {
                console.error('Resend OTP error:', error);
                showError('C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i.');
                button.disabled = false;
                button.textContent = originalText;
            }
        });

        // Back button handlers
        document.getElementById('back-to-register').addEventListener('click', function() {
            showStep(1);
        });

        document.getElementById('back-to-verify').addEventListener('click', function() {
            showStep(2);
        });

        // Tab switch functionality
        document.querySelectorAll('button').forEach((btn, index) => {
            if (index < 2) {
                btn.addEventListener('click', function() {
                    // Remove active class from all tabs
                    document.querySelectorAll('button').forEach((b, i) => {
                        if (i < 2) {
                            b.classList.remove('bg-blue-600', 'text-white');
                            b.classList.add('bg-gray-100', 'text-gray-700');
                        }
                    });
                    
                    // Add active class to clicked tab
                    this.classList.remove('bg-gray-100', 'text-gray-700');
                    this.classList.add('bg-blue-600', 'text-white');
                });
            }
        });

        // OTP input formatting
        document.getElementById('otp-code').addEventListener('input', function(e) {
            // Only allow numbers
            e.target.value = e.target.value.replace(/[^0-9]/g, '');
        });

        // Initialize first step
        updateStepIndicators(1);
    </script>
</body>
</html>
