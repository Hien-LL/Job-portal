<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chi ti·∫øt tin tuy·ªÉn d·ª•ng - JobPortal</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="styles.css">
  <style>
    body{font-family:'Inter',sans-serif}
    h1,h2,h3,h4,h5,h6{font-family:'Poppins',sans-serif}
  </style>
</head>
<body class="bg-slate-50 min-h-screen">
  <!-- Header Fragment -->
  <div data-fragment="fragments/header.html" data-header-type="auto"></div>

  <main class="px-4 sm:px-6 lg:px-8 py-8">
    <div class="max-w-7xl mx-auto">

      <!-- back -->
      <div class="mb-6">
        <a href="recruiter-company-detail.html" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-semibold">
          <span class="mr-2">‚Üê</span> Quay l·∫°i
        </a>
      </div>

      <!-- loading -->
      <div id="loading-state" class="text-center py-16">
        <svg class="animate-spin h-12 w-12 text-blue-600 mx-auto mb-4" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" class="opacity-25"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0A12 12 0 000 12h4z"/>
        </svg>
        <p class="text-gray-600 font-medium">ƒêang t·∫£i th√¥ng tin tin tuy·ªÉn d·ª•ng...</p>
      </div>

      <!-- error -->
      <div id="error-state" class="hidden bg-red-50 border border-red-200 text-red-700 rounded-xl p-5 mb-6">
        <div class="flex gap-3">
          <svg class="w-6 h-6 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01M4.93 4.93l14.14 14.14M12 2a10 10 0 100 20 10 10 0 000-20z"/>
          </svg>
          <p id="error-message" class="font-semibold"></p>
        </div>
      </div>

      <!-- content -->
      <div id="job-content" class="hidden grid grid-cols-1 lg:grid-cols-12 gap-6">

        <!-- LEFT: main -->
        <section class="lg:col-span-8 space-y-6">

          <!-- job header card -->
          <div class="bg-white rounded-2xl shadow-sm ring-1 ring-slate-200 p-6">
            <div class="flex items-start gap-4">
              <!-- logo -->
              <div class="w-16 h-16 rounded-xl overflow-hidden bg-slate-100 flex items-center justify-center ring-1 ring-slate-200">
                <img id="company-logo" src="" alt="logo" class="w-full h-full object-cover hidden">
                <span id="company-logo-fallback" class="text-slate-400 text-2xl">üè¢</span>
              </div>

              <div class="flex-1">
                <div class="flex items-start justify-between gap-3">
                  <h1 id="job-title" class="text-2xl md:text-3xl font-bold text-slate-900"></h1>
                  <span id="job-posted-ago" class="text-sm text-slate-500 whitespace-nowrap">‚Äî</span>
                </div>

                <div class="mt-2 flex flex-wrap items-center gap-3 text-sm">
                  <a id="job-company" href="#" class="text-slate-700 font-medium">‚Äî</a>
                  <span class="text-slate-400">‚Ä¢</span>
                  <span id="job-location" class="text-slate-700">‚Äî</span>
                  <span class="text-slate-400">‚Ä¢</span>
                  <span id="job-salary-range" class="text-slate-700">‚Äî</span>
                  <span class="text-slate-400">‚Ä¢</span>
                  <span id="job-seniority" class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-700">‚Äî</span>
                </div>

                <div class="mt-4 flex flex-wrap gap-3">
                  <!-- recruiter actions -->
                  <div class="ml-auto flex gap-2">
                    <button id="edit-job-btn" class="px-4 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-500">Ch·ªânh s·ª≠a</button>
                    <button id="delete-job-btn" class="px-4 py-2 rounded-lg bg-red-600 text-white font-semibold hover:bg-red-500">X√≥a</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- m√¥ t·∫£ -->
          <div class="bg-white rounded-2xl shadow-sm ring-1 ring-slate-200 p-6">
            <h2 class="text-xl font-bold text-slate-900 mb-4">M√¥ t·∫£ c√¥ng vi·ªác</h2>
            <div id="job-description" class="prose prose-sm max-w-none text-slate-700 leading-relaxed"></div>
          </div>

          <!-- quy·ªÅn l·ª£i (optional, render n·∫øu c√≥) -->
          <div id="benefits-card" class="hidden bg-white rounded-2xl shadow-sm ring-1 ring-slate-200 p-6">
            <h3 class="text-lg font-bold text-slate-900 mb-4">Quy·ªÅn l·ª£i</h3>
            <ul id="job-benefits" class="grid sm:grid-cols-2 gap-y-2 text-slate-700"></ul>
          </div>

        </section>

        <!-- RIGHT: sidebar -->
        <aside class="lg:col-span-4 space-y-6">

          <!-- Th√¥ng tin tuy·ªÉn d·ª•ng -->
          <div class="bg-white rounded-2xl shadow-sm ring-1 ring-slate-200 p-6 lg:sticky lg:top-6">
            <h3 class="text-lg font-bold text-slate-900 mb-4">Th√¥ng tin tuy·ªÉn d·ª•ng</h3>

            <dl class="divide-y divide-slate-200">
              <div class="py-3 flex items-start justify-between gap-4">
                <dt class="text-slate-600">Ng√†y ƒëƒÉng</dt>
                <dd id="job-posted-date" class="font-semibold text-slate-900 text-right">‚Äî</dd>
              </div>
              <div class="py-3 flex items-start justify-between gap-4">
                <dt class="text-slate-600">H·∫°n n·ªôp h·ªì s∆°</dt>
                <dd id="job-deadline" class="font-semibold text-slate-900 text-right">‚Äî</dd>
              </div>
              <div class="py-3 flex items-start justify-between gap-4">
                <dt class="text-slate-600">ƒê·ªãa ƒëi·ªÉm</dt>
                <dd id="job-sidebar-location" class="font-semibold text-slate-900 text-right">‚Äî</dd>
              </div>
              <div class="py-3 flex items-start justify-between gap-4">
                <dt class="text-slate-600">M·ª©c l∆∞∆°ng</dt>
                <dd id="job-salary-range-sidebar" class="font-semibold text-slate-900 text-right">‚Äî</dd>
              </div>
              <div class="py-3 flex items-start justify-between gap-4">
                <dt class="text-slate-600">C·∫•p b·∫≠c</dt>
                <dd id="job-sidebar-seniority" class="font-semibold text-slate-900 text-right">‚Äî</dd>
              </div>
              <div class="py-3 flex items-start justify-between gap-4">
                <dt class="text-slate-600">Kinh nghi·ªám</dt>
                <dd id="job-experience" class="font-semibold text-slate-900 text-right">‚Äî</dd>
              </div>
            </dl>
          </div>
        </aside>
      </div>
    </div>
  </main>

  <!-- Edit Modal -->
  <div id="edit-modal" class="fixed inset-0 bg-black/50 hidden z-50 items-center justify-center p-4 backdrop-blur-sm">
    <div class="bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
      <div class="px-6 py-4 border-b bg-blue-50 flex items-center justify-between sticky top-0">
        <h2 class="text-xl font-bold">‚úèÔ∏è Ch·ªânh s·ª≠a tin tuy·ªÉn d·ª•ng</h2>
        <button id="close-modal" class="text-3xl leading-none px-2 hover:text-red-600">&times;</button>
      </div>

      <form id="edit-form" class="p-6 space-y-5">
        <input type="hidden" id="company-id-input">
        <input type="hidden" id="job-id-input">

        <div>
          <label class="block text-sm font-bold mb-2">Ti√™u ƒë·ªÅ *</label>
          <input id="edit-title" type="text" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500">
        </div>

        <div>
          <label class="block text-sm font-bold mb-2">M√¥ t·∫£ *</label>
          <textarea id="edit-description" rows="5" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500"></textarea>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-bold mb-2">L∆∞∆°ng t·ªëi thi·ªÉu (VND) *</label>
            <input id="edit-salary-min" type="number" min="0" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500">
          </div>
          <div>
            <label class="block text-sm font-bold mb-2">L∆∞∆°ng t·ªëi ƒëa (VND) *</label>
            <input id="edit-salary-max" type="number" min="0" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500">
          </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-bold mb-2">C·∫•p ƒë·ªô *</label>
            <select id="edit-seniority" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500">
              <option value="">-- Ch·ªçn --</option>
              <option value="Internship">Internship</option>
              <option value="Junior">Junior</option>
              <option value="Middle">Middle</option>
              <option value="Senior">Senior</option>
              <option value="Lead">Lead</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-bold mb-2">Danh m·ª•c *</label>
            <select id="edit-category-id" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500">
              <option value="">-- ƒêang t·∫£i danh m·ª•c --</option>
            </select>
          </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-bold mb-2">Lo·∫°i c√¥ng vi·ªác *</label>
            <select id="edit-employment-type" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500">
              <option value="">-- Ch·ªçn --</option>
              <option value="FullTime">To√†n th·ªùi gian</option>
              <option value="PartTime">B√°n th·ªùi gian</option>
              <option value="Contract">H·ª£p ƒë·ªìng</option>
              <option value="Freelance">Freelance</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-bold mb-2">H·∫øt h·∫°n *</label>
            <input id="edit-expires-at" type="datetime-local" required class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500">
          </div>
        </div>

        <div class="flex items-center gap-3">
          <input id="edit-is-remote" type="checkbox" class="w-5 h-5">
          <label for="edit-is-remote" class="font-semibold">Cho ph√©p l√†m remote</label>
        </div>

        <div class="pt-4 flex gap-3">
          <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl">C·∫≠p nh·∫≠t</button>
          <button type="button" id="cancel-modal" class="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-3 rounded-xl">H·ªßy</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <div data-fragment="fragments/footer.html"></div>

  <!-- Scripts -->
  <script src="js/config.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/common-helpers.js"></script>
  <script src="js/markdown-service.js"></script>
  <script src="js/fragments-loader.js"></script>
  <script src="js/recruiter-job-detail-service.js"></script>
</body>
</html>
